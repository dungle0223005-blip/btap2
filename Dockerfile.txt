# 1. Sử dụng Tomcat 9 chính thức
FROM tomcat:9.0

# 2. Xóa webapps mặc định để Tomcat trống
RUN rm -rf /usr/local/tomcat/webapps/*

# 3. Copy file WAR từ thư mục dist của project vào ROOT.war
#    ROOT.war giúp app chạy trực tiếp tại "/"
COPY dist/MyApp.war /usr/local/tomcat/webapps/ROOT.war

# 4. Expose port 8080 (Render sẽ map biến $PORT sang 8080)
EXPOSE 8080

# 5. Khởi động Tomcat
#    CMD chạy bên trong container, Render không cần Start Command
CMD ["catalina.sh", "run"]
